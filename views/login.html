{% extends 'layout.html' %}
{% block body %}
<h1>Welcome</h1>
<h2>Use one of the buttons below to <span style="color:#0099FF;">sign in.</span><br/>To use Windows Live ID, Google, Yahoo! or Facebook click the Azure ACS button, if you have a Persona account use the Persona button.</h2><br/>
Don&rsquo;t worry if you don&rsquo;t have a backpack account, that&rsquo;ll get taken care of once you sign in.<br/>

<form class="signin js-browserid-form" method="POST" action="/backpack/authenticate">
  <input class="js-browserid-input" name="assertion" type="hidden"></input>
  <input name="_csrf" type="hidden" value="{{ csrfToken }}"></input>
</form>

<div style="padding-top: 10px">
  <a href="/auth/azureacs" class="persona-button"><span>Sign in with Azure ACS</span></a>
</div>

<div style="padding-top: 10px">
  <a class="js-browserid-link persona-button orange" href="#"><span>Sign in with Persona  </span></a>
</div>

<script type="text/javascript">
!!function loginHandler () {
//begin login handler

  function launchBrowserId(callback) {
    return function() { navigator.id.get(callback, {
      siteName: 'Open Badge Backpack',
      termsOfService: '/tou.html',
      privacyPolicy: '/privacy.html',
      returnTo: '/'
    }); }
  }
  function handleResponse(assertion) {
    if (!assertion) return false;
    $('.js-browserid-input').val(assertion);
    $('.js-browserid-form').trigger('submit');
  }
  $('.js-browserid-link').bind('click', launchBrowserId(handleResponse));

//begin login handler scope
}();
</script>
{% endblock %}
